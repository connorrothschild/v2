<!DOCTYPE html><html lang="en-us" >

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="generator" content="Source Themes Academic 4.8.0">
  
    
  
    
    
    
    
    
      
      
      
    
    
  
    <meta name="author" content="Connor Rothschild">
  
    
    
    
      
    
    <meta name="description" content="Recreating a table by The Economist entirely in R, using {reactable}.">
  
    
    <link rel="alternate" hreflang="en-us" href="/post/economist-table-replication-using-reactable/">
  
    


    
    
    
    <meta name="theme-color" content="black">
    
  
    
    
  
    
    
    
    
      
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">
  
      
      
      
        
      
      
        
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github-gist.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github-gist.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
  
      
  
      
  
      
      
        
  
        
        
  
        
      
        
  
        
        
  
        
      
        
  
        
        
  
        
      
        
  
        
        
  
        
      
        
  
        
        
  
        
      
        
  
        
        
  
        
      
        
  
        
        
  
        
      
        
  
        
        
  
        
      
        
  
        
        
  
        
      
        
  
        
        
  
        
      
        
  
        
        
  
        
          <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
        
      
        
  
        
        
  
        
      
        
  
        
        
  
        
      
        
  
        
        
          
        
  
        
      
        
  
        
        
  
        
      
  
    
  
    
    
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Muli:400,500,600,700,800,900%7CLato:400,500,600,700,800,900%7CRoboto+Mono:400,500,600,700,800,900%7CKhula:400,500,600,700%7CInter:400,500,600,700,800,900&display=swap">
    
  
    
    
    
    
    <link rel="stylesheet" href="/css/academic.css">
  
    




    

  
    
    
  
    
  
    <link rel="manifest" href="/index.webmanifest">
    <link rel="icon" type="image/png" href="/images/icon_hu0188231a098412f92e188b9e094eeb1f_333201_32x32_fill_lanczos_center_2.png">
    <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu0188231a098412f92e188b9e094eeb1f_333201_192x192_fill_lanczos_center_2.png">
  
    <link rel="canonical" href="/post/economist-table-replication-using-reactable/">
  
    
    
    
    
    
    
    
      
    
    
    <meta property="twitter:card" content="summary_large_image">
    
    <meta property="twitter:site" content="@CL_Rothschild">
    <meta property="twitter:creator" content="@CL_Rothschild">
    
    <meta property="og:site_name" content="Connor Rothschild">
    <meta property="og:url" content="/post/economist-table-replication-using-reactable/">
    <meta property="og:title" content="Recreating a Table by The Economist Using Reactable | Connor Rothschild">
    <meta property="og:description" content="Recreating a table by The Economist entirely in R, using {reactable}."><meta property="og:image" content="/post/economist-table-replication-using-reactable/featured.png">
    <meta property="twitter:image" content="/post/economist-table-replication-using-reactable/featured.png"><meta property="og:locale" content="en-us">
    
      
        <meta property="article:published_time" content="2020-05-18T00:00:00&#43;00:00">
      
      <meta property="article:modified_time" content="2020-06-01T11:13:28-05:00">
    
  
    


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/economist-table-replication-using-reactable/"
  },
  "headline": "Recreating a Table by The Economist Using Reactable",
  
  "image": [
    "/post/economist-table-replication-using-reactable/featured.png"
  ],
  
  "datePublished": "2020-05-18T00:00:00Z",
  "dateModified": "2020-06-01T11:13:28-05:00",
  
  "author": {
    "@type": "Person",
    "name": "Connor Rothschild"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Connor Rothschild",
    "logo": {
      "@type": "ImageObject",
      "url": "/images/icon_hu0188231a098412f92e188b9e094eeb1f_333201_192x192_fill_lanczos_center_2.png"
    }
  },
  "description": "Recreating a table by The Economist entirely in R, using {reactable}."
}
</script>

  

  

  
    

  
    




  
    
  
    <title>Recreating a Table by The Economist Using Reactable | Connor Rothschild</title>
  
  </head>
  
<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  







<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">Connor Rothschild</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">Connor Rothschild</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/post"><span>Blog</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#experience"><span>Experience</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#accomplishments"><span>Awards</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#projects"><span>Projects</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact"><span>Contact</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/files/cv.pdf"><span>Resume</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      

      

    </ul>

  </div>
</nav>


  <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>Recreating a Table by The Economist Using Reactable</h1>

  

  
    


<div class="article-metadata">

  
  
  
  
  <div>
    

  
  <span>Connor Rothschild</span>
  </div>
  
  

  
  <span class="article-date">
    
    
      
          Last updated on
      
    
    Jun 1, 2020
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    16 min read
  </span>
  

  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/category/r/">R</a></span>
  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style">
      
<script src="/rmarkdown-libs/core-js/shim.min.js"></script>
<script src="/rmarkdown-libs/react/react.min.js"></script>
<script src="/rmarkdown-libs/react/react-dom.min.js"></script>
<script src="/rmarkdown-libs/reactwidget/react-tools.js"></script>
<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/reactable-binding/reactable.js"></script>


<p><em>The Economist</em> recently released a series of country-level <a href="https://twitter.com/J_CD_T/status/1261625814854045696">datasets</a> on ‘excess mortality’, a term used to <a href="https://www.economist.com/graphic-detail/2020/04/16/tracking-covid-19-excess-deaths-across-countries">describe</a> ‘the gap between the total number of people who died from any cause, and the historical average for the same place and time of year.’ In simpler terms, the measure captures how many deaths <em>are</em> happening that <em>shouldn’t be</em>.</p>
<p>In the (free!) articles accompanying that data, I came across the following table:</p>
<div style="text-align:center">
<p><img width = 100% src = img/econ-table.png></p>
</div>
<p>I thought the table was clean and sent a clear message. The addition of inline barcharts is not intrusive but still helps the reader takeaway insights about the data. It’s a rather pretty table. Having recently <a href="https://twitter.com/dataandme/status/1196552930167599106">come across</a> Greg Lin’s package <a href="https://glin.github.io/reactable/index.html"><code>reactable</code></a>, I thought this could be a good opportunity to try my hand at recreating the above.</p>
<p>(Coincidentally, while I was working on this project, Malcolm Barrett released a similar <a href="https://malco.io/2020/05/16/replicating-an-nyt-table-of-swedish-covid-deaths-with-gt/">blog post</a> documenting his recreation of a NYT table using <code>gt</code>. Check it out!)</p>
<div id="loading-packages" class="section level2">
<h2>Loading packages</h2>
<p>Our process uses standard packages: <code>reactable</code> (obviously), <code>htmltools</code> as its buddy, <code>lubridate</code> for days and times, <code>hrbrthemes</code> for <em>The Economist’s</em> font, and <code>tidyverse</code> for general purpose data wrangling.</p>
<pre class="r"><code>library(reactable)
library(htmltools)
library(lubridate)
library(hrbrthemes)
library(tidyverse)</code></pre>
</div>
<div id="gather-the-data" class="section level2">
<h2>Gather the data</h2>
<p>You can definitely skip this step if you’re not interested in the data collection and cleaning process.</p>
<p>Unfortunately, one of the more time-consuming steps of this project was getting the data in the same format <em>The Economist</em> used in their article. The data they released comes in the form of a series of <a href="https://github.com/TheEconomist/covid-19-excess-deaths-tracker/tree/master/output-data/excess-deaths">country-level CSVs</a>; although helpful for country-level analysis, this meant that we have to modify the data into a joined format in order to create a table.</p>
<p>Let’s begin by creating a function which reads in <strong>each individual CSV</strong>, selects relevant columns, and stores that specific dataframe in the global environment.</p>
<pre class="r"><code>create_dataframe &lt;- function(country) {
  ## for URL (below)
  country &lt;- str_replace(country, &quot; &quot;, &quot;_&quot;)
  
  ## read in CSV, given country parameter
  data &lt;-
    readr::read_csv(
      paste0(
        &#39;https://raw.githubusercontent.com/TheEconomist/covid-19-excess-deaths-tracker/master/output-data/excess-deaths/&#39;, country, &#39;_excess_deaths.csv&#39;
      )
    )
  
  ## select relevant columns
  data &lt;- data %&gt;%
    select(
      country,
      region,
      start_date,
      end_date,
      population,
      total_deaths,
      covid_deaths,
      expected_deaths,
      excess_deaths,
      non_covid_deaths
    )
  
  assign(country, rbind(data), envir = .GlobalEnv)
}</code></pre>
<p>With that function created, we then want to loop it with each country <em>The Economist</em> has included.</p>
<p>To do so, we grab their list of sources from GitHub and pull each country into a list:</p>
<pre class="r"><code>country_names &lt;-
  readr::read_csv(
    &#39;https://raw.githubusercontent.com/TheEconomist/covid-19-excess-deaths-tracker/master/source-data/list_of_sources.csv&#39;
  ) %&gt;%
  select(country) %&gt;%
  distinct() %&gt;%
  mutate(country = stringr::str_to_lower(country)) %&gt;%
  filter(country != &#39;all&#39;) %&gt;%
  pull()</code></pre>
<p>Then, we loop!</p>
<pre class="r"><code>for (country in country_names) {
  create_dataframe(country)
}</code></pre>
<p>Now, we have a list of dataframes, with each containing one country’s data on excess mortality.</p>
<p>Finally, we merge each of these new dataframes into one master dataset. Here, we are defining in <code>dfs</code> a list of all objects in the global environment that are of the structure data frame. Then, we <code>rbind</code> them all together!</p>
<pre class="r"><code>dfs = sapply(.GlobalEnv, is.data.frame)

data &lt;- do.call(rbind, mget(names(dfs)[dfs]))</code></pre>
<p>But unfortunately, that’s not all. We need to filter our data to only include the places that are in <em>The Economist’s</em> table. To make matters more difficult, the table’s identifying row is titled ‘Region/Country’, and includes data from two <em>separate</em> rows in the CSVs.</p>
<p>Let’s begin by manually defining and filtering according to the countries and regions that <em>The Economist</em> includes. (This selection does not seem to have an order to it; as such, it has to be manual).</p>
<pre class="r"><code>good_countries &lt;-
  c(&quot;Britain&quot;,
    &quot;Spain&quot;,
    &quot;Italy&quot;,
    &quot;France&quot;,
    &quot;Netherlands&quot;,
    &quot;Belgium&quot;,
    &quot;Sweden&quot;,
    &quot;Austria&quot;)

good_regions &lt;- c(&quot;New York City&quot;, &quot;Istanbul&quot;, &quot;Jakarta&quot;)

data_filtered_countries &lt;- data %&gt;%
  filter(country %in% good_countries) %&gt;%
  filter(country == region)</code></pre>
<p>Because the table only has one row for country/region, and groups them accordingly, we can go ahead and replace the <code>country</code> variable in the <code>data_filtered_regions</code> dataframe with <code>region</code>.</p>
<pre class="r"><code>data_filtered_regions &lt;- data %&gt;%
  filter(region %in% good_regions) %&gt;%
  # replace for the sake of the table
  mutate(country = region)</code></pre>
<p>And merge:</p>
<pre class="r"><code>data_filtered &lt;-
  rbind(data_filtered_countries, data_filtered_regions)</code></pre>
<p>Next, we notice that the table title says ‘Excess mortality <em>since region/country’s first 50 covid deaths</em>.’ This means we need to exclude counts of excess deaths <em>before</em> a region had 50 COVID deaths.</p>
<pre class="r"><code>data_filtered &lt;- data_filtered %&gt;%
  group_by(country) %&gt;%
  mutate(csum = cumsum(covid_deaths))</code></pre>
<p>At this point (after only selecting our relevant columns), our data looks like this:</p>
<pre class="r"><code>data_filtered %&gt;% 
  select(country, start_date, end_date, covid_deaths, excess_deaths, covid_deaths, csum) %&gt;% 
  reactable()</code></pre>
<div id="htmlwidget-1" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"country":["Britain","Britain","Britain","Britain","Britain","Britain","Britain","Britain","Britain","Britain","Britain","Britain","Britain","Britain","Britain","Britain","Britain","Britain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Jakarta","Jakarta","Jakarta","Jakarta","New York City","New York City","New York City","New York City","New York City","New York City","New York City","New York City","New York City","New York City","New York City","New York City","New York City","New York City","New York City","New York City","New York City","Istanbul","Istanbul","Istanbul","Istanbul","Istanbul","Istanbul","Istanbul","Istanbul","Istanbul","Istanbul","Istanbul","Istanbul","Istanbul","Istanbul","Istanbul","Istanbul","Istanbul","Istanbul","Istanbul"],"start_date":["2020-01-04","2020-01-11","2020-01-18","2020-01-25","2020-02-01","2020-02-08","2020-02-15","2020-02-22","2020-02-29","2020-03-07","2020-03-14","2020-03-21","2020-03-28","2020-04-04","2020-04-11","2020-04-18","2020-04-25","2020-05-02","2020-01-01","2020-01-08","2020-01-15","2020-01-22","2020-01-29","2020-02-05","2020-02-12","2020-02-19","2020-02-26","2020-03-04","2020-03-11","2020-03-18","2020-03-25","2020-04-01","2020-04-08","2020-04-15","2020-04-22","2020-04-29","2020-01-01","2020-01-08","2020-01-15","2020-01-22","2020-01-29","2020-02-05","2020-02-12","2020-02-19","2020-02-26","2020-03-04","2020-03-11","2020-03-18","2020-03-25","2020-04-01","2020-04-08","2020-04-15","2020-04-22","2020-01-06","2020-01-13","2020-01-20","2020-01-27","2020-02-03","2020-02-10","2020-02-17","2020-02-24","2020-03-02","2020-03-09","2020-03-16","2020-03-23","2020-03-30","2020-04-06","2020-04-13","2020-04-20","2020-04-27","2020-05-04","2020-01-01","2020-01-08","2020-01-15","2020-01-22","2020-01-29","2020-02-05","2020-02-12","2020-02-19","2020-02-26","2020-03-04","2020-03-11","2020-03-18","2020-03-25","2020-01-01","2020-01-08","2020-01-15","2020-01-22","2020-01-29","2020-02-05","2020-02-12","2020-02-19","2020-02-26","2020-03-04","2020-03-11","2020-03-18","2020-03-25","2020-04-01","2020-04-08","2020-04-15","2020-04-22","2020-02-24","2020-03-02","2020-03-09","2020-03-16","2020-03-23","2020-03-30","2020-04-06","2020-04-13","2020-04-20","2020-01-27","2020-02-03","2020-02-10","2020-02-17","2020-02-24","2020-03-02","2020-03-09","2020-03-16","2020-03-23","2020-03-30","2020-01-01","2020-02-01","2020-03-01","2020-04-01","2019-12-29","2020-01-05","2020-01-12","2020-01-19","2020-01-26","2020-02-02","2020-02-09","2020-02-16","2020-02-23","2020-03-01","2020-03-08","2020-03-15","2020-03-22","2020-03-29","2020-04-05","2020-04-12","2020-04-19","2020-01-01","2020-01-08","2020-01-15","2020-01-22","2020-01-29","2020-02-05","2020-02-12","2020-02-19","2020-02-26","2020-03-04","2020-03-11","2020-03-18","2020-03-25","2020-04-01","2020-04-08","2020-04-15","2020-04-22","2020-04-29","2020-05-06"],"end_date":["2020-01-10","2020-01-17","2020-01-24","2020-01-31","2020-02-07","2020-02-14","2020-02-21","2020-02-28","2020-03-06","2020-03-13","2020-03-20","2020-03-27","2020-04-03","2020-04-10","2020-04-17","2020-04-24","2020-05-01","2020-05-08","2020-01-07","2020-01-14","2020-01-21","2020-01-28","2020-02-04","2020-02-11","2020-02-18","2020-02-25","2020-03-03","2020-03-10","2020-03-17","2020-03-24","2020-03-31","2020-04-07","2020-04-14","2020-04-21","2020-04-28","2020-05-05","2020-01-07","2020-01-14","2020-01-21","2020-01-28","2020-02-04","2020-02-11","2020-02-18","2020-02-25","2020-03-03","2020-03-10","2020-03-17","2020-03-24","2020-03-31","2020-04-07","2020-04-14","2020-04-21","2020-04-28","2020-01-12","2020-01-19","2020-01-26","2020-02-02","2020-02-09","2020-02-16","2020-02-23","2020-03-01","2020-03-08","2020-03-15","2020-03-22","2020-03-29","2020-04-05","2020-04-12","2020-04-19","2020-04-26","2020-05-03","2020-05-10","2020-01-07","2020-01-14","2020-01-21","2020-01-28","2020-02-04","2020-02-11","2020-02-18","2020-02-25","2020-03-03","2020-03-10","2020-03-17","2020-03-24","2020-03-31","2020-01-07","2020-01-14","2020-01-21","2020-01-28","2020-02-04","2020-02-11","2020-02-18","2020-02-25","2020-03-03","2020-03-10","2020-03-17","2020-03-24","2020-03-31","2020-04-07","2020-04-14","2020-04-21","2020-04-28","2020-03-01","2020-03-08","2020-03-15","2020-03-22","2020-03-29","2020-04-05","2020-04-12","2020-04-19","2020-04-26","2020-02-02","2020-02-09","2020-02-16","2020-02-23","2020-03-01","2020-03-08","2020-03-15","2020-03-22","2020-03-29","2020-04-05","2020-01-31","2020-02-29","2020-03-31","2020-04-30","2020-01-04","2020-01-11","2020-01-18","2020-01-25","2020-02-01","2020-02-08","2020-02-15","2020-02-22","2020-02-29","2020-03-07","2020-03-14","2020-03-21","2020-03-28","2020-04-04","2020-04-11","2020-04-18","2020-04-25","2020-01-07","2020-01-14","2020-01-21","2020-01-28","2020-02-04","2020-02-11","2020-02-18","2020-02-25","2020-03-03","2020-03-10","2020-03-17","2020-03-24","2020-03-31","2020-04-07","2020-04-14","2020-04-21","2020-04-28","2020-05-05","2020-05-12"],"covid_deaths":[0,0,0,0,0,0,0,0,0,5,114,610,3812,6899,9509,9024,6684,4429,0,0,0,0,0,0,0,0,0,35,461,2211,5026,5486,4372,3691,2540,1797,0,0,0,0,0,0,0,0,0,0,8,73,251,532,668,629,550,0,0,0,0,0,0,0,0,3,17,159,592,995,971,947,791,581,384,0,0,0,0,0,0,0,10,69,552,1857,4238,5462,0,0,0,0,0,0,1,0,3,29,142,925,2423,6805,5401,5067,2864,0,0,0,18,180,745,1550,2125,1717,0,0,0,0,0,0,1,15,70,118,0,0,84,297,0,0,0,0,0,0,0,0,0,0,4,176,1198,3754,5218,4125,2720,0,0,0,0,0,0,0,0,0,0,0,22,85,255.5,339,428,366.5,264,187],"excess_deaths":[84,-325.6,-1090,-794.6,-942.200000000001,-923,-717.4,-345.799999999999,-724,-187.799999999999,-207,1112.8,7122.2,8979.2,12731.4,12358.2,8457.6,3840.6,-621.25,-41,177.5,282.25,286,-560.5,-728.5,-704,-601.5,-408.5,675,4198.75,8323.25,7937.5,5389,2947.75,1134,546,-109.6,-76,-165.2,-119.6,-114,-128.8,-106,-239,-212.8,-95.5999999999999,-102.4,79.8,258.2,615.6,819.6,675.6,484.2,9,-167.6,-247.8,-163.8,-117.4,-114.6,-385.4,-232.2,-236.4,-108,459.6,1380.4,2107.8,2047.6,1409,1085,612.4,294,-1525.8,-1509,-1294.6,-716.799999999999,-1119,-837,-758.799999999999,-499.4,-224.4,1738.8,5271,8758.8,8487,-563,-623,-766,-787.200000000001,-699,-1008.8,-961.4,-1343.6,-792.4,-308.200000000001,954.200000000001,2401.4,5644.2,7266.2,5523.2,3247.4,1061.8,-108,-122,-81,267,934,1789,2065,1489,853,132,-138,-48,-61,-34,0,8,252,123,207,585.5,-28.5,1375.5,1409.5,-182.2,-84,-22.2,-11,14.4000000000001,-40.2,-7.20000000000005,-49,-1,5,32,339.2,1694.6,4998,6573.6,4550.8,2572,-67.6666666666667,-23.6666666666667,16.3333333333333,26.3333333333333,-20.6666666666667,8.33333333333326,15.3333333333333,-84.3333333333333,-55.3333333333333,-57.3333333333333,88,283,444.333333333333,818.333333333333,782,629.333333333333,481.333333333333,374,287.333333333333],"csum":[0,0,0,0,0,0,0,0,0,5,119,729,4541,11440,20949,29973,36657,41086,0,0,0,0,0,0,0,0,0,35,496,2707,7733,13219,17591,21282,23822,25619,0,0,0,0,0,0,0,0,0,0,8,81,332,864,1532,2161,2711,0,0,0,0,0,0,0,0,3,20,179,771,1766,2737,3684,4475,5056,5440,0,0,0,0,0,0,0,10,79,631,2488,6726,12188,0,0,0,0,0,0,1,1,4,33,175,1100,3523,10328,15729,20796,23660,0,0,0,18,198,943,2493,4618,6335,0,0,0,0,0,0,1,16,86,204,0,0,84,381,0,0,0,0,0,0,0,0,0,0,4,180,1378,5132,10350,14475,17195,0,0,0,0,0,0,0,0,0,0,0,22,107,362.5,701.5,1129.5,1496,1760,1947]},"columns":[{"accessor":"country","name":"country","type":"character"},{"accessor":"start_date","name":"start_date","type":"Date"},{"accessor":"end_date","name":"end_date","type":"Date"},{"accessor":"covid_deaths","name":"covid_deaths","type":"numeric"},{"accessor":"excess_deaths","name":"excess_deaths","type":"numeric"},{"accessor":"csum","name":"csum","type":"numeric"}],"defaultPageSize":10,"paginationType":"numbers","showPageInfo":true,"minRows":1,"dataKey":"5845fe168655e5f6a72e9b9f636d6082"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
<p>We need to group each country according to its total deaths related to COVID-19, and excess deaths. Then, using those two numbers, we calculate the percentage of excess deaths attributable to COVID-19. This can be used as a metric for underreporting of COVID-19 cases in a country.</p>
<pre class="r"><code>data_for_table &lt;- data_filtered %&gt;%
  filter(excess_deaths &gt; 0) %&gt;%
  group_by(country) %&gt;%
  summarise(
    excess_deaths = round(sum(excess_deaths)),
    covid_deaths = round(sum(covid_deaths)),
    perc = covid_deaths / excess_deaths
  ) %&gt;%
  select(country, covid_deaths, excess_deaths, perc)

reactable(data_for_table, pagination = FALSE)</code></pre>
<div id="htmlwidget-2" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"country":["Austria","Belgium","Britain","France","Istanbul","Italy","Jakarta","Netherlands","New York City","Spain","Sweden"],"covid_deaths":[204,6335,40967,23627,1947,12109,381,5420,17195,25584,2703],"excess_deaths":[722,7397,54686,26098,4254,24256,3370,9405,20780,31897,2933],"perc":[0.282548476454294,0.856428281735839,0.749131404747102,0.90531841520423,0.457686882933709,0.499216688654354,0.113056379821958,0.576289207868155,0.827478344562079,0.802081700473399,0.921581997954313]},"columns":[{"accessor":"country","name":"country","type":"character"},{"accessor":"covid_deaths","name":"covid_deaths","type":"numeric"},{"accessor":"excess_deaths","name":"excess_deaths","type":"numeric"},{"accessor":"perc","name":"perc","type":"numeric"}],"defaultPageSize":11,"paginationType":"numbers","showPageInfo":true,"minRows":1,"dataKey":"249cb3ef37824d809949c55e67461087"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
<p>The only thing missing at this point is the date range. In order to find and display the dates, we need to find the <em>first date after a given country/region hit 50 COVID-19 cases</em> and the <em>last date in the data</em> for that country/region.</p>
<p>How do we do this? First, we’ll create a <a href="https://stackoverflow.com/questions/40039903/r-add-th-rd-and-nd-to-dates">function</a> called <code>append_date_suffix</code> which, according to a given day, appends the appropriate suffix.</p>
<pre class="r"><code>append_date_suffix &lt;- function(dates) {
  suff &lt;- case_when(
    dates %in% c(11, 12, 13) ~ &quot;th&quot;,
    dates %% 10 == 1 ~ &#39;st&#39;,
    dates %% 10 == 2 ~ &#39;nd&#39;,
    dates %% 10 == 3 ~ &#39;rd&#39;,
    TRUE ~ &quot;th&quot;
  )
  paste0(dates, suff)
}</code></pre>
<p>We’ll then group by the <code>country</code> variable and find the min and max date (with the minimum only appearing after a country has seen 50 COVID deaths). Then, we do a lot of formatting of individual days and months, and append them all together with dashes in <em>The Economist’s</em> style. Sorry, there’s a lot going on here.</p>
<pre class="r"><code>dates_data &lt;-
  data_filtered %&gt;%
  # only looking at date ranges starting post-50 deaths
  filter(csum &gt; 50) %&gt;%
  group_by(country) %&gt;%
  summarise(start_date = min(start_date),
            end_date = max(end_date)) %&gt;%
  mutate(
    clean_start_day = format(start_date, &quot;%d&quot;),
    clean_start_day = append_date_suffix(as.numeric(clean_start_day)),
    clean_start_month = format(start_date, &quot;%b&quot;),
    clean_end_day = format(end_date, &quot;%d&quot;),
    clean_end_day = append_date_suffix(as.numeric(clean_end_day)),
    clean_end_month = format(end_date, &quot;%b&quot;)
  ) %&gt;%
  mutate(
    clean_range = paste0(
      clean_start_month,&quot; &quot;, ## Mar
      clean_start_day, &quot;-&quot;, ## 6-
      clean_end_month, &quot; &quot;, ## May
      clean_end_day ## 18
    )
  ) %&gt;%
  select(country, clean_range)</code></pre>
<p>This creates date ranges that look like this:</p>
<div id="htmlwidget-3" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-3">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"country":["Austria","Belgium","Britain","France","Istanbul","Italy","Jakarta","Netherlands","New York City","Spain","Sweden"],"clean_range":["Mar 23rd-Apr 5th","Mar 23rd-Apr 26th","Mar 14th-May 8th","Mar 11th-Apr 28th","Mar 25th-May 12th","Feb 26th-Mar 31st","Mar 1st-Apr 30th","Mar 16th-May 10th","Mar 15th-Apr 25th","Mar 11th-May 5th","Mar 18th-Apr 28th"]},"columns":[{"accessor":"country","name":"country","type":"character"},{"accessor":"clean_range","name":"clean_range","type":"character"}],"defaultPageSize":11,"paginationType":"numbers","showPageInfo":true,"minRows":1,"dataKey":"944cb010b09fbd5dbf1363c55bf203a7"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
<p>Join these dates with our existing data…</p>
<pre class="r"><code>data_for_table &lt;- data_filtered %&gt;%
  filter(excess_deaths &gt; 0) %&gt;%
  group_by(country) %&gt;%
  summarise(
    excess_deaths = round(sum(excess_deaths)),
    covid_deaths = round(sum(covid_deaths)),
    perc = covid_deaths / excess_deaths
  ) %&gt;%
  left_join(dates_data, by = &#39;country&#39;) %&gt;%
  select(country, clean_range, covid_deaths, excess_deaths, perc)</code></pre>
<p>and we get our finalized dataset:</p>
<div id="htmlwidget-4" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-4">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"country":["Austria","Belgium","Britain","France","Istanbul","Italy","Jakarta","Netherlands","New York City","Spain","Sweden"],"clean_range":["Mar 23rd-Apr 5th","Mar 23rd-Apr 26th","Mar 14th-May 8th","Mar 11th-Apr 28th","Mar 25th-May 12th","Feb 26th-Mar 31st","Mar 1st-Apr 30th","Mar 16th-May 10th","Mar 15th-Apr 25th","Mar 11th-May 5th","Mar 18th-Apr 28th"],"covid_deaths":[204,6335,40967,23627,1947,12109,381,5420,17195,25584,2703],"excess_deaths":[722,7397,54686,26098,4254,24256,3370,9405,20780,31897,2933],"perc":[0.282548476454294,0.856428281735839,0.749131404747102,0.90531841520423,0.457686882933709,0.499216688654354,0.113056379821958,0.576289207868155,0.827478344562079,0.802081700473399,0.921581997954313]},"columns":[{"accessor":"country","name":"country","type":"character"},{"accessor":"clean_range","name":"clean_range","type":"character"},{"accessor":"covid_deaths","name":"covid_deaths","type":"numeric"},{"accessor":"excess_deaths","name":"excess_deaths","type":"numeric"},{"accessor":"perc","name":"perc","type":"numeric"}],"defaultPageSize":11,"paginationType":"numbers","showPageInfo":true,"minRows":1,"dataKey":"87a9a93568ca457a61d4bc6661464513"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="creating-the-table" class="section level2">
<h2>Creating the table</h2>
<p>Finally, we’re ready to take that dataset and create our table. We can begin by defining some parameters that make the table easier to use and more aesthetically pleasing. Here, we sort according to excess deaths (but don’t include an arrow), make it compact, and show all results on one page.</p>
<pre class="r"><code>reactable(
  data_for_table,
  defaultSortOrder = &#39;desc&#39;,
  defaultSorted = &#39;excess_deaths&#39;,
  showSortIcon = FALSE,
  compact = TRUE,
  pagination = FALSE)</code></pre>
<div id="htmlwidget-5" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-5">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"country":["Austria","Belgium","Britain","France","Istanbul","Italy","Jakarta","Netherlands","New York City","Spain","Sweden"],"clean_range":["Mar 23rd-Apr 5th","Mar 23rd-Apr 26th","Mar 14th-May 8th","Mar 11th-Apr 28th","Mar 25th-May 12th","Feb 26th-Mar 31st","Mar 1st-Apr 30th","Mar 16th-May 10th","Mar 15th-Apr 25th","Mar 11th-May 5th","Mar 18th-Apr 28th"],"covid_deaths":[204,6335,40967,23627,1947,12109,381,5420,17195,25584,2703],"excess_deaths":[722,7397,54686,26098,4254,24256,3370,9405,20780,31897,2933],"perc":[0.282548476454294,0.856428281735839,0.749131404747102,0.90531841520423,0.457686882933709,0.499216688654354,0.113056379821958,0.576289207868155,0.827478344562079,0.802081700473399,0.921581997954313]},"columns":[{"accessor":"country","name":"country","type":"character"},{"accessor":"clean_range","name":"clean_range","type":"character"},{"accessor":"covid_deaths","name":"covid_deaths","type":"numeric"},{"accessor":"excess_deaths","name":"excess_deaths","type":"numeric"},{"accessor":"perc","name":"perc","type":"numeric"}],"defaultSortDesc":true,"defaultSorted":[{"id":"excess_deaths","desc":true}],"defaultPageSize":11,"paginationType":"numbers","showPageInfo":true,"minRows":1,"compact":true,"showSortIcon":false,"dataKey":"87a9a93568ca457a61d4bc6661464513"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
<div id="style-headers" class="section level3">
<h3>Style headers</h3>
<p>Next, let’s make the column headers stylistically similar to <em>The Economist</em>. We do so with reactable’s <code>defaultColDef</code>, where we define a <code>colDef</code> with styles for the header and regular cells. Here, we can include CSS (which you can find by inspecting the table at hand). Throughout this post, you’ll notice my constant references to <code>font_es</code>. This is from <a href="https://github.com/hrbrmstr/hrbrthemes">Bob Rudis’s <code>hrbrthemes</code></a>. It contains the font name for Economist Sans Condensed, which is the font that <em>The Economist</em> uses!</p>
<pre class="r"><code>reactable(
  data_for_table,
  defaultSortOrder = &#39;desc&#39;,
  defaultSorted = &#39;excess_deaths&#39;,
  showSortIcon = FALSE,
  compact = TRUE,
  pagination = FALSE,
  ######## NEW ########
  defaultColDef = colDef(
    ### define header styling
    headerStyle = list(
      textAlign = &quot;left&quot;,
      fontSize = &quot;11px&quot;,
      lineHeight = &quot;14px&quot;,
      textTransform = &quot;uppercase&quot;,
      color = &quot;#0c0c0c&quot;,
      fontWeight = &quot;500&quot;,
      borderBottom = &quot;2px solid #e9edf0&quot;,
      paddingBottom = &quot;3px&quot;,
      verticalAlign = &quot;bottom&quot;,
      fontFamily = font_es
    ),
    ### define default column styling
    style = list(
      fontFamily = font_es,
      fontSize = &quot;14px&quot;,
      verticalAlign = &quot;center&quot;,
      align = &quot;left&quot;
    )
  )
)</code></pre>
<div id="htmlwidget-6" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-6">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"country":["Austria","Belgium","Britain","France","Istanbul","Italy","Jakarta","Netherlands","New York City","Spain","Sweden"],"clean_range":["Mar 23rd-Apr 5th","Mar 23rd-Apr 26th","Mar 14th-May 8th","Mar 11th-Apr 28th","Mar 25th-May 12th","Feb 26th-Mar 31st","Mar 1st-Apr 30th","Mar 16th-May 10th","Mar 15th-Apr 25th","Mar 11th-May 5th","Mar 18th-Apr 28th"],"covid_deaths":[204,6335,40967,23627,1947,12109,381,5420,17195,25584,2703],"excess_deaths":[722,7397,54686,26098,4254,24256,3370,9405,20780,31897,2933],"perc":[0.282548476454294,0.856428281735839,0.749131404747102,0.90531841520423,0.457686882933709,0.499216688654354,0.113056379821958,0.576289207868155,0.827478344562079,0.802081700473399,0.921581997954313]},"columns":[{"accessor":"country","name":"country","type":"character","style":{"fontFamily":"EconSansCndReg","fontSize":"14px","verticalAlign":"center","align":"left"},"headerStyle":{"textAlign":"left","fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg"}},{"accessor":"clean_range","name":"clean_range","type":"character","style":{"fontFamily":"EconSansCndReg","fontSize":"14px","verticalAlign":"center","align":"left"},"headerStyle":{"textAlign":"left","fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg"}},{"accessor":"covid_deaths","name":"covid_deaths","type":"numeric","style":{"fontFamily":"EconSansCndReg","fontSize":"14px","verticalAlign":"center","align":"left"},"headerStyle":{"textAlign":"left","fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg"}},{"accessor":"excess_deaths","name":"excess_deaths","type":"numeric","style":{"fontFamily":"EconSansCndReg","fontSize":"14px","verticalAlign":"center","align":"left"},"headerStyle":{"textAlign":"left","fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg"}},{"accessor":"perc","name":"perc","type":"numeric","style":{"fontFamily":"EconSansCndReg","fontSize":"14px","verticalAlign":"center","align":"left"},"headerStyle":{"textAlign":"left","fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg"}}],"defaultSortDesc":true,"defaultSorted":[{"id":"excess_deaths","desc":true}],"defaultPageSize":11,"paginationType":"numbers","showPageInfo":true,"minRows":1,"compact":true,"showSortIcon":false,"dataKey":"8ad8706dfbeacfc7871563a2bd901bf3"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="format-columns" class="section level3">
<h3>Format columns</h3>
<p>Now, we can start to format the specific columns appropriately. The three easiest columns are <strong>Region/Country</strong>, <strong>Time Period</strong>, <strong>COVID-19 as % of Total</strong>. In each of these columns, we create a <code>colDef</code> which defines the column name, as well as some styling.</p>
<p>You’ll notice the addition of <code>JS</code> in our percent column. This allows us to include JavaScript in our columns and column headers. I use it to do something simple, like a line break. You can use JS for plenty of more complex purposes, <a href="https://glin.github.io/reactable/articles/examples.html">some of which are documented here</a>.</p>
<pre class="r"><code>reactable(
  data_for_table,
  defaultSortOrder = &#39;desc&#39;,
  defaultSorted = &#39;excess_deaths&#39;,
  showSortIcon = FALSE,
  compact = TRUE,
  pagination = FALSE,
  defaultColDef = colDef(
    headerStyle = list(
      textAlign = &quot;left&quot;,
      fontSize = &quot;11px&quot;,
      lineHeight = &quot;14px&quot;,
      textTransform = &quot;uppercase&quot;,
      color = &quot;#0c0c0c&quot;,
      fontWeight = &quot;500&quot;,
      borderBottom = &quot;2px solid #e9edf0&quot;,
      paddingBottom = &quot;3px&quot;,
      verticalAlign = &quot;bottom&quot;,
      fontFamily = font_es
    ),
    style = list(
      fontFamily = font_es,
      fontSize = &quot;14px&quot;,
      verticalAlign = &quot;center&quot;,
      align = &quot;left&quot;
    )
  ),
  ####### NEW #######
  columns = list(
    country = colDef(
      name = &quot;Region / Country&quot;,
      style = list(fontFamily = font_es,
                   fontWeight = &quot;400&quot;)
    ),
    perc = colDef(
      html = TRUE,
      header = JS(&quot;
      function(colInfo) {
        return &#39;COVID-19 as&lt;br&gt;% of total&#39;
      }&quot;),
      name = &quot;COVID-19 as % of Total&quot;,
      align = &quot;right&quot;,
      maxWidth = 100,
      format = colFormat(percent = TRUE, digits = 0),
      style = list(fontFamily =  font_es_bold),
      headerStyle = list(
        fontSize = &quot;11px&quot;,
        lineHeight = &quot;14px&quot;,
        textTransform = &quot;uppercase&quot;,
        color = &quot;#0c0c0c&quot;,
        fontWeight = &quot;500&quot;,
        borderBottom = &quot;2px solid #e9edf0&quot;,
        paddingBottom = &quot;3px&quot;,
        verticalAlign = &quot;bottom&quot;,
        fontFamily = font_es,
        textAlign = &quot;right&quot;
      )
    ),
    clean_range = colDef(
      name = &quot;Time Period&quot;,
      style = list(
        color = &#39;#3f5661&#39;,
        fontSize = &#39;12px&#39;,
        fontFamily = font_es
      )
    )
  )
)</code></pre>
<div id="htmlwidget-7" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-7">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"country":["Austria","Belgium","Britain","France","Istanbul","Italy","Jakarta","Netherlands","New York City","Spain","Sweden"],"clean_range":["Mar 23rd-Apr 5th","Mar 23rd-Apr 26th","Mar 14th-May 8th","Mar 11th-Apr 28th","Mar 25th-May 12th","Feb 26th-Mar 31st","Mar 1st-Apr 30th","Mar 16th-May 10th","Mar 15th-Apr 25th","Mar 11th-May 5th","Mar 18th-Apr 28th"],"covid_deaths":[204,6335,40967,23627,1947,12109,381,5420,17195,25584,2703],"excess_deaths":[722,7397,54686,26098,4254,24256,3370,9405,20780,31897,2933],"perc":[0.282548476454294,0.856428281735839,0.749131404747102,0.90531841520423,0.457686882933709,0.499216688654354,0.113056379821958,0.576289207868155,0.827478344562079,0.802081700473399,0.921581997954313]},"columns":[{"accessor":"country","name":"Region / Country","type":"character","style":{"fontFamily":"EconSansCndReg","fontWeight":"400"},"headerStyle":{"textAlign":"left","fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg"}},{"accessor":"clean_range","name":"Time Period","type":"character","style":{"color":"#3f5661","fontSize":"12px","fontFamily":"EconSansCndReg"},"headerStyle":{"textAlign":"left","fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg"}},{"accessor":"covid_deaths","name":"covid_deaths","type":"numeric","style":{"fontFamily":"EconSansCndReg","fontSize":"14px","verticalAlign":"center","align":"left"},"headerStyle":{"textAlign":"left","fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg"}},{"accessor":"excess_deaths","name":"excess_deaths","type":"numeric","style":{"fontFamily":"EconSansCndReg","fontSize":"14px","verticalAlign":"center","align":"left"},"headerStyle":{"textAlign":"left","fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg"}},{"accessor":"perc","name":"COVID-19 as % of Total","type":"numeric","style":{"fontFamily":"EconSansCndBol"},"headerStyle":{"fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg","textAlign":"right"},"format":{"cell":{"digits":0,"percent":true},"aggregated":{"digits":0,"percent":true}},"header":"\n      function(colInfo) {\n        return 'COVID-19 as<br>% of total'\n      }","html":true,"maxWidth":100,"align":"right"}],"defaultSortDesc":true,"defaultSorted":[{"id":"excess_deaths","desc":true}],"defaultPageSize":11,"paginationType":"numbers","showPageInfo":true,"minRows":1,"compact":true,"showSortIcon":false,"dataKey":"a9245ac4442c2fd989f596473fa410d5"},"children":[]},"class":"reactR_markup"},"evals":["tag.attribs.columns.4.header"],"jsHooks":[]}</script>
</div>
<div id="add-the-barcharts" class="section level3">
<h3>Add the barcharts</h3>
<p>We can now create the ‘deaths’ columns, which include barcharts.</p>
<p><code>reactable</code> makes the addition of barcharts to tables quite easy, thanks to its integration of JavaScript. Here, I pull from one <a href="https://glin.github.io/reactable/articles/twitter-followers/twitter-followers.html">example</a> on <code>reactable</code>’s website, and use the following code:</p>
<pre class="r"><code>reactable(
  data_for_table,
  defaultSortOrder = &#39;desc&#39;,
  defaultSorted = &#39;excess_deaths&#39;,
  showSortIcon = FALSE,
  compact = TRUE,
  pagination = FALSE,
  defaultColDef = colDef(
    headerStyle = list(
      textAlign = &quot;left&quot;,
      fontSize = &quot;11px&quot;,
      lineHeight = &quot;14px&quot;,
      textTransform = &quot;uppercase&quot;,
      color = &quot;#0c0c0c&quot;,
      fontWeight = &quot;500&quot;,
      borderBottom = &quot;2px solid #e9edf0&quot;,
      paddingBottom = &quot;3px&quot;,
      verticalAlign = &quot;bottom&quot;,
      fontFamily = font_es
    ),
    style = list(
      fontFamily = font_es,
      fontSize = &quot;14px&quot;,
      verticalAlign = &quot;center&quot;,
      align = &quot;left&quot;
    )
  ),
  columns = list(
    country = colDef(
      name = &quot;Region / Country&quot;,
      style = list(fontFamily = font_es,
                   fontWeight = &quot;400&quot;)
    ),
    perc = colDef(
      html = TRUE,
      header = JS(&quot;
      function(colInfo) {
        return &#39;COVID-19 as&lt;br&gt;% of total&#39;
      }&quot;),
      name = &quot;COVID-19 as % of Total&quot;,
      align = &quot;right&quot;,
      maxWidth = 100,
      format = colFormat(percent = TRUE, digits = 0),
      style = list(fontFamily =  font_es_bold),
      headerStyle = list(
        fontSize = &quot;11px&quot;,
        lineHeight = &quot;14px&quot;,
        textTransform = &quot;uppercase&quot;,
        color = &quot;#0c0c0c&quot;,
        fontWeight = &quot;500&quot;,
        borderBottom = &quot;2px solid #e9edf0&quot;,
        paddingBottom = &quot;3px&quot;,
        verticalAlign = &quot;bottom&quot;,
        fontFamily = font_es,
        textAlign = &quot;right&quot;
      )
    ),
    clean_range = colDef(
      name = &quot;Time Period&quot;,
      style = list(
        color = &#39;#3f5661&#39;,
        fontSize = &#39;12px&#39;,
        fontFamily = font_es
      )
    ),
    ###### NEW ######
    covid_deaths = colDef(
      name = &quot;COVID-19 Deaths&quot;,
      cell = function(value) {
        width &lt;- paste0(value * 100 / max(data_for_table$covid_deaths), &quot;%&quot;)
        value &lt;- format(value, big.mark = &quot;,&quot;)
        value &lt;- format(value, width = 10, justify = &quot;right&quot;)
        bar &lt;- div(
          class = &quot;bar-chart&quot;,
          style = list(marginRight = &quot;6px&quot;),
          div(
            class = &quot;bar&quot;,
            style = list(width = width, backgroundColor = &quot;#F15A3F&quot;)
          )
        )
        div(class = &quot;bar-cell&quot;, span(class = &quot;number&quot;, value), bar)
      }
    ),
    excess_deaths = colDef(
      name = &quot;Total Excess Deaths&quot;,
      cell = function(value) {
        width &lt;-
          paste0(value * 100 / max(data_for_table$excess_deaths), &quot;%&quot;)
        value &lt;- format(value, big.mark = &quot;,&quot;)
        value &lt;- format(value, width = 10, justify = &quot;right&quot;)
        bar &lt;- div(
          class = &quot;bar-chart&quot;,
          style = list(marginRight = &quot;6px&quot;),
          div(
            class = &quot;bar&quot;,
            style = list(width = width, backgroundColor = &quot;#3F5661&quot;)
          )
        )
        div(class = &quot;bar-cell&quot;, span(class = &quot;number&quot;, value), bar)
      }
    )
  )
)</code></pre>
<p>Let’s break that down step-by-step, with a focus on <code>covid_deaths</code>.</p>
<p>First, we need to define some CSS. <code>reactable</code> allows you to easily include CSS is RMarkdown documents, in chunks defined as <code>css</code>.</p>
<pre class="css"><code>.bar-cell {
  display: flex;
  align-items: center;
}

.number {
  font-size: 13.5px;
  white-space: pre;
}

.bar-chart {
  flex-grow: 1;
  margin-left: 6px;
  height: 22px;
}

.bar {
  height: 100%;
}</code></pre>
<style type="text/css">
.bar-cell {
  display: flex;
  align-items: center;
}

.number {
  font-size: 13.5px;
  white-space: pre;
}

.bar-chart {
  flex-grow: 1;
  margin-left: 6px;
  height: 22px;
}

.bar {
  height: 100%;
}
</style>
<p>Now, let’s look at how we define <code>covid_deaths</code>:</p>
<pre class="r"><code>  covid_deaths = colDef(
    ### define the name
    name = &quot;COVID-19 Deaths&quot;,
    ### create a &#39;cell&#39; function
    cell = function(value) {
      ### define the bar width according to the specified value
      width &lt;- paste0(value * 100 / max(data_for_table$covid_deaths), &quot;%&quot;)
      ### add a comma to the label
      value &lt;- format(value, big.mark = &quot;,&quot;)
      ### justify and provide padding with width
      value &lt;- format(value, width = 10, justify = &quot;right&quot;)
      ### create the barchart div
      bar &lt;- div(
        ### with a class of &#39;bar-chart&#39;
        class = &quot;bar-chart&quot;,
        ### give the bar a margin
        style = list(marginRight = &quot;6px&quot;),
        ### create the *actual* bar, with the red economist color
        div(
          class = &quot;bar&quot;,
          style = list(width = width, backgroundColor = &quot;#F15A3F&quot;)
        )
      )
      ### bring it all together, with the &#39;value&#39; (number) preceding the bar itself
      div(class = &quot;bar-cell&quot;, span(class = &quot;number&quot;, value), bar)
    }
  )</code></pre>
<p>This creates a table that looks like this:</p>
<div id="htmlwidget-8" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-8">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"country":["Austria","Belgium","Britain","France","Istanbul","Italy","Jakarta","Netherlands","New York City","Spain","Sweden"],"clean_range":["Mar 23rd-Apr 5th","Mar 23rd-Apr 26th","Mar 14th-May 8th","Mar 11th-Apr 28th","Mar 25th-May 12th","Feb 26th-Mar 31st","Mar 1st-Apr 30th","Mar 16th-May 10th","Mar 15th-Apr 25th","Mar 11th-May 5th","Mar 18th-Apr 28th"],"covid_deaths":[204,6335,40967,23627,1947,12109,381,5420,17195,25584,2703],"excess_deaths":[722,7397,54686,26098,4254,24256,3370,9405,20780,31897,2933],"perc":[0.282548476454294,0.856428281735839,0.749131404747102,0.90531841520423,0.457686882933709,0.499216688654354,0.113056379821958,0.576289207868155,0.827478344562079,0.802081700473399,0.921581997954313]},"columns":[{"accessor":"country","name":"Region / Country","type":"character","style":{"fontFamily":"EconSansCndReg","fontWeight":"400"},"headerStyle":{"textAlign":"left","fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg"}},{"accessor":"clean_range","name":"Time Period","type":"character","style":{"color":"#3f5661","fontSize":"12px","fontFamily":"EconSansCndReg"},"headerStyle":{"textAlign":"left","fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg"}},{"accessor":"covid_deaths","name":"COVID-19 Deaths","type":"numeric","style":{"fontFamily":"EconSansCndReg","fontSize":"14px","verticalAlign":"center","align":"left"},"headerStyle":{"textAlign":"left","fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg"},"cell":[{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["       204"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"0.49796177411087%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     6,335"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"15.4636658774135%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    40,967"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"100%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    23,627"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"57.6732492005761%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     1,947"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"4.75260575585227%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    12,109"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"29.5579368760222%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["       381"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"0.930016842824713%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     5,420"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"13.230160861181%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    17,195"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"41.972807381551%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    25,584"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"62.4502648473161%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     2,703"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"6.59799350696902%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]}]},{"accessor":"excess_deaths","name":"Total Excess Deaths","type":"numeric","style":{"fontFamily":"EconSansCndReg","fontSize":"14px","verticalAlign":"center","align":"left"},"headerStyle":{"textAlign":"left","fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg"},"cell":[{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["       722"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"1.32026478440552%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     7,397"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"13.5263138646089%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    54,686"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"100%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    26,098"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"47.7233661266138%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     4,254"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"7.77895622279925%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    24,256"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"44.3550451669532%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     3,370"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"6.16245474161577%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     9,405"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"17.1981860073876%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    20,780"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"37.9987565373222%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    31,897"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"58.327542698314%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     2,933"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"5.36334710894927%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]}]},{"accessor":"perc","name":"COVID-19 as % of Total","type":"numeric","style":{"fontFamily":"EconSansCndBol"},"headerStyle":{"fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg","textAlign":"right"},"format":{"cell":{"digits":0,"percent":true},"aggregated":{"digits":0,"percent":true}},"header":"\n      function(colInfo) {\n        return 'COVID-19 as<br>% of total'\n      }","html":true,"maxWidth":100,"align":"right"}],"defaultSortDesc":true,"defaultSorted":[{"id":"excess_deaths","desc":true}],"defaultPageSize":11,"paginationType":"numbers","showPageInfo":true,"minRows":1,"compact":true,"showSortIcon":false,"dataKey":"7fed8502c33f575f68606f21c78d769a"},"children":[]},"class":"reactR_markup"},"evals":["tag.attribs.columns.4.header"],"jsHooks":[]}</script>
</div>
<div id="add-a-title" class="section level3">
<h3>Add a title</h3>
<p>Finally, we can add the table title and subtitle. We do so by storing the above table in our environment. (This is the final table code!)</p>
<pre class="r"><code>table &lt;- reactable(
  data_for_table,
  defaultSortOrder = &#39;desc&#39;,
  defaultSorted = &#39;excess_deaths&#39;,
  showSortIcon = FALSE,
  compact = TRUE,
  pagination = FALSE,
  defaultColDef = colDef(
    headerStyle = list(
      textAlign = &quot;left&quot;,
      fontSize = &quot;11px&quot;,
      lineHeight = &quot;14px&quot;,
      textTransform = &quot;uppercase&quot;,
      color = &quot;#0c0c0c&quot;,
      fontWeight = &quot;500&quot;,
      borderBottom = &quot;2px solid #e9edf0&quot;,
      paddingBottom = &quot;3px&quot;,
      verticalAlign = &quot;bottom&quot;,
      fontFamily = font_es
    ),
    style = list(
      fontFamily = font_es,
      fontSize = &quot;14px&quot;,
      verticalAlign = &quot;center&quot;,
      align = &quot;left&quot;
    )
  ),
  
  columns = list(
    country = colDef(
      name = &quot;Region / Country&quot;,
      style = list(fontFamily = font_es,
                   fontWeight = &quot;400&quot;)
    ),
    covid_deaths = colDef(
      name = &quot;COVID-19 Deaths&quot;,
      # align = &quot;left&quot;,
      cell = function(value) {
        width &lt;- paste0(value * 100 / max(data_for_table$covid_deaths), &quot;%&quot;)
        value &lt;- format(value, big.mark = &quot;,&quot;)
        # value &lt;- str_pad(value, 6, pad = &quot;&quot;)
        value &lt;- format(value, width = 10, justify = &quot;right&quot;)
        bar &lt;- div(
          class = &quot;bar-chart&quot;,
          style = list(marginRight = &quot;6px&quot;),
          div(
            class = &quot;bar&quot;,
            style = list(width = width, backgroundColor = &quot;#F15A3F&quot;)
          )
        )
        div(class = &quot;bar-cell&quot;, span(class = &quot;number&quot;, value), bar)
      }
    ),
    excess_deaths = colDef(
      name = &quot;Total Excess Deaths&quot;,
      # align = &quot;left&quot;,
      cell = function(value) {
        width &lt;-
          paste0(value * 100 / max(data_for_table$excess_deaths), &quot;%&quot;)
        value &lt;- format(value, big.mark = &quot;,&quot;)
        value &lt;- format(value, width = 10, justify = &quot;right&quot;)
        bar &lt;- div(
          class = &quot;bar-chart&quot;,
          style = list(marginRight = &quot;6px&quot;),
          div(
            class = &quot;bar&quot;,
            style = list(width = width, backgroundColor = &quot;#3F5661&quot;)
          )
        )
        div(class = &quot;bar-cell&quot;, span(class = &quot;number&quot;, value), bar)
      }
    ),
    perc = colDef(
      html = TRUE,
      header = JS(&quot;
      function(colInfo) {
        return &#39;COVID-19 as&lt;br&gt;% of total&#39;
      }&quot;),
      name = &quot;COVID-19 as % of Total&quot;,
      align = &quot;right&quot;,
      maxWidth = 100,
      format = colFormat(percent = TRUE, digits = 0),
      style = list(fontFamily =  font_es_bold),
      headerStyle = list(
        fontSize = &quot;11px&quot;,
        lineHeight = &quot;14px&quot;,
        textTransform = &quot;uppercase&quot;,
        color = &quot;#0c0c0c&quot;,
        fontWeight = &quot;500&quot;,
        borderBottom = &quot;2px solid #e9edf0&quot;,
        paddingBottom = &quot;3px&quot;,
        verticalAlign = &quot;bottom&quot;,
        fontFamily = font_es,
        textAlign = &quot;right&quot;
      )
    ),
    clean_range = colDef(
      name = &quot;Time Period&quot;,
      style = list(
        color = &#39;#3f5661&#39;,
        fontSize = &#39;12px&#39;,
        fontFamily = font_es
      )
    )
  ),
)</code></pre>
<p>Now, we can include a title and subtitle above the table. We use some <code>htmltools</code> functions to create divs, headers, and paragraphs.</p>
<pre class="r"><code>div(
    div(
      h2(&quot;Excess mortality since region/country’s first 50 covid deaths&quot;),
      p(
        ### create the &#39;Updated on ...&#39; and make it dynamic
        paste0(
          &quot;Updated on &quot;, format(Sys.Date(), &quot;%B &quot;),
          append_date_suffix(as.numeric(format(Sys.Date(), &quot;%d&quot;))), &quot; &quot;,
          strftime(Sys.time(), format = &quot;%H:%M&quot;), &quot; UCT&quot;
        )
      ),
    ),
    table)</code></pre>
<div>
<div>
<h2>Excess mortality since region/country’s first 50 covid deaths</h2>
<p>Updated on May 24th 12:25 UCT</p>
</div>
<div id="htmlwidget-9" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-9">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"country":["Austria","Belgium","Britain","France","Istanbul","Italy","Jakarta","Netherlands","New York City","Spain","Sweden"],"clean_range":["Mar 23rd-Apr 5th","Mar 23rd-Apr 26th","Mar 14th-May 8th","Mar 11th-Apr 28th","Mar 25th-May 12th","Feb 26th-Mar 31st","Mar 1st-Apr 30th","Mar 16th-May 10th","Mar 15th-Apr 25th","Mar 11th-May 5th","Mar 18th-Apr 28th"],"covid_deaths":[204,6335,40967,23627,1947,12109,381,5420,17195,25584,2703],"excess_deaths":[722,7397,54686,26098,4254,24256,3370,9405,20780,31897,2933],"perc":[0.282548476454294,0.856428281735839,0.749131404747102,0.90531841520423,0.457686882933709,0.499216688654354,0.113056379821958,0.576289207868155,0.827478344562079,0.802081700473399,0.921581997954313]},"columns":[{"accessor":"country","name":"Region / Country","type":"character","style":{"fontFamily":"EconSansCndReg","fontWeight":"400"},"headerStyle":{"textAlign":"left","fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg"}},{"accessor":"clean_range","name":"Time Period","type":"character","style":{"color":"#3f5661","fontSize":"12px","fontFamily":"EconSansCndReg"},"headerStyle":{"textAlign":"left","fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg"}},{"accessor":"covid_deaths","name":"COVID-19 Deaths","type":"numeric","style":{"fontFamily":"EconSansCndReg","fontSize":"14px","verticalAlign":"center","align":"left"},"headerStyle":{"textAlign":"left","fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg"},"cell":[{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["       204"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"0.49796177411087%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     6,335"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"15.4636658774135%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    40,967"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"100%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    23,627"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"57.6732492005761%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     1,947"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"4.75260575585227%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    12,109"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"29.5579368760222%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["       381"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"0.930016842824713%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     5,420"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"13.230160861181%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    17,195"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"41.972807381551%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    25,584"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"62.4502648473161%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     2,703"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"6.59799350696902%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]}]},{"accessor":"excess_deaths","name":"Total Excess Deaths","type":"numeric","style":{"fontFamily":"EconSansCndReg","fontSize":"14px","verticalAlign":"center","align":"left"},"headerStyle":{"textAlign":"left","fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg"},"cell":[{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["       722"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"1.32026478440552%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     7,397"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"13.5263138646089%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    54,686"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"100%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    26,098"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"47.7233661266138%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     4,254"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"7.77895622279925%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    24,256"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"44.3550451669532%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     3,370"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"6.16245474161577%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     9,405"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"17.1981860073876%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    20,780"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"37.9987565373222%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    31,897"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"58.327542698314%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     2,933"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"5.36334710894927%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]}]},{"accessor":"perc","name":"COVID-19 as % of Total","type":"numeric","style":{"fontFamily":"EconSansCndBol"},"headerStyle":{"fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg","textAlign":"right"},"format":{"cell":{"digits":0,"percent":true},"aggregated":{"digits":0,"percent":true}},"header":"\n      function(colInfo) {\n        return 'COVID-19 as<br>% of total'\n      }","html":true,"maxWidth":100,"align":"right"}],"defaultSortDesc":true,"defaultSorted":[{"id":"excess_deaths","desc":true}],"defaultPageSize":11,"paginationType":"numbers","showPageInfo":true,"minRows":1,"compact":true,"showSortIcon":false,"dataKey":"7fed8502c33f575f68606f21c78d769a"},"children":[]},"class":"reactR_markup"},"evals":["tag.attribs.columns.4.header"],"jsHooks":[]}</script>
</div>
<p>Yikes! Those font sizes don’t quite line up with <em>The Economist</em>’s. Let’s add classes to our divs to match their style.</p>
<pre class="css"><code>.table {
  margin: 0 auto;
  width: 675px;
}

.tableTitle {
  margin: 6px 0;
  font-size: 16px;
  font-family: &#39;Econ Sans Cnd&#39;
}

.tableTitle h2 {
  font-size: 16px;
  font-weight: bold;
  font-family: &#39;Econ Sans Cnd&#39;
}

.tableTitle p {
  font-size: 14px;
  font-weight: 500;
}</code></pre>
<style type="text/css">
.table {
  margin: 0 auto;
  width: 675px;
}

.tableTitle {
  margin: 6px 0;
  font-size: 16px;
  font-family: 'Econ Sans Cnd'
}

.tableTitle h2 {
  font-size: 16px;
  font-weight: bold;
  font-family: 'Econ Sans Cnd'
}

.tableTitle p {
  font-size: 14px;
  font-weight: 500;
}
</style>
<pre class="r"><code>div(class = &quot;tableTitle&quot;,
    div(
      class = &quot;title&quot;,
      h2(&quot;Excess mortality since region/country’s first 50 covid deaths&quot;),
      p(
        paste0(&quot;Updated on &quot;, format(Sys.Date(),&quot;%B &quot;),
          append_date_suffix(as.numeric(format(Sys.Date(), &quot;%d&quot;))), &quot; &quot;,
          strftime(Sys.time(), format = &quot;%H:%M&quot;), &quot; UCT&quot;
        )
      ),
    ),
    table)</code></pre>
<div class="tableTitle">
<div class="title">
<h2>Excess mortality since region/country’s first 50 covid deaths</h2>
<p>Updated on May 24th 12:25 UCT</p>
</div>
<div id="htmlwidget-10" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-10">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"country":["Austria","Belgium","Britain","France","Istanbul","Italy","Jakarta","Netherlands","New York City","Spain","Sweden"],"clean_range":["Mar 23rd-Apr 5th","Mar 23rd-Apr 26th","Mar 14th-May 8th","Mar 11th-Apr 28th","Mar 25th-May 12th","Feb 26th-Mar 31st","Mar 1st-Apr 30th","Mar 16th-May 10th","Mar 15th-Apr 25th","Mar 11th-May 5th","Mar 18th-Apr 28th"],"covid_deaths":[204,6335,40967,23627,1947,12109,381,5420,17195,25584,2703],"excess_deaths":[722,7397,54686,26098,4254,24256,3370,9405,20780,31897,2933],"perc":[0.282548476454294,0.856428281735839,0.749131404747102,0.90531841520423,0.457686882933709,0.499216688654354,0.113056379821958,0.576289207868155,0.827478344562079,0.802081700473399,0.921581997954313]},"columns":[{"accessor":"country","name":"Region / Country","type":"character","style":{"fontFamily":"EconSansCndReg","fontWeight":"400"},"headerStyle":{"textAlign":"left","fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg"}},{"accessor":"clean_range","name":"Time Period","type":"character","style":{"color":"#3f5661","fontSize":"12px","fontFamily":"EconSansCndReg"},"headerStyle":{"textAlign":"left","fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg"}},{"accessor":"covid_deaths","name":"COVID-19 Deaths","type":"numeric","style":{"fontFamily":"EconSansCndReg","fontSize":"14px","verticalAlign":"center","align":"left"},"headerStyle":{"textAlign":"left","fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg"},"cell":[{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["       204"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"0.49796177411087%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     6,335"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"15.4636658774135%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    40,967"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"100%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    23,627"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"57.6732492005761%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     1,947"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"4.75260575585227%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    12,109"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"29.5579368760222%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["       381"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"0.930016842824713%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     5,420"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"13.230160861181%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    17,195"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"41.972807381551%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    25,584"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"62.4502648473161%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     2,703"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"6.59799350696902%","backgroundColor":"#F15A3F"},"className":"bar"},"children":[]}]}]}]},{"accessor":"excess_deaths","name":"Total Excess Deaths","type":"numeric","style":{"fontFamily":"EconSansCndReg","fontSize":"14px","verticalAlign":"center","align":"left"},"headerStyle":{"textAlign":"left","fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg"},"cell":[{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["       722"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"1.32026478440552%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     7,397"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"13.5263138646089%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    54,686"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"100%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    26,098"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"47.7233661266138%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     4,254"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"7.77895622279925%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    24,256"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"44.3550451669532%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     3,370"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"6.16245474161577%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     9,405"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"17.1981860073876%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    20,780"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"37.9987565373222%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["    31,897"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"58.327542698314%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"bar-cell"},"children":[{"name":"span","attribs":{"className":"number"},"children":["     2,933"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"5.36334710894927%","backgroundColor":"#3F5661"},"className":"bar"},"children":[]}]}]}]},{"accessor":"perc","name":"COVID-19 as % of Total","type":"numeric","style":{"fontFamily":"EconSansCndBol"},"headerStyle":{"fontSize":"11px","lineHeight":"14px","textTransform":"uppercase","color":"#0c0c0c","fontWeight":"500","borderBottom":"2px solid #e9edf0","paddingBottom":"3px","verticalAlign":"bottom","fontFamily":"EconSansCndReg","textAlign":"right"},"format":{"cell":{"digits":0,"percent":true},"aggregated":{"digits":0,"percent":true}},"header":"\n      function(colInfo) {\n        return 'COVID-19 as<br>% of total'\n      }","html":true,"maxWidth":100,"align":"right"}],"defaultSortDesc":true,"defaultSorted":[{"id":"excess_deaths","desc":true}],"defaultPageSize":11,"paginationType":"numbers","showPageInfo":true,"minRows":1,"compact":true,"showSortIcon":false,"dataKey":"7fed8502c33f575f68606f21c78d769a"},"children":[]},"class":"reactR_markup"},"evals":["tag.attribs.columns.4.header"],"jsHooks":[]}</script>
</div>
<p>Let’s compare that to the table we’re attempting to replicate. Note that some of the data has changed in the time between <em>The Economist</em> published their table and I created mine.</p>
<div style="text-align: center">
<p><img width = 100% src = img/econ-table.png></p>
</div>
</div>
</div>

    </div>

    





<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/r/">r</a>
  
  <a class="badge badge-light" href="/tag/visualization/">visualization</a>
  
  <a class="badge badge-light" href="/tag/interactive/">interactive</a>
  
  <a class="badge badge-light" href="/tag/replication/">replication</a>
  
  <a class="badge badge-light" href="/tag/table/">table</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=/post/economist-table-replication-using-reactable/&amp;text=Recreating%20a%20Table%20by%20The%20Economist%20Using%20Reactable" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=/post/economist-table-replication-using-reactable/&amp;t=Recreating%20a%20Table%20by%20The%20Economist%20Using%20Reactable" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Recreating%20a%20Table%20by%20The%20Economist%20Using%20Reactable&amp;body=/post/economist-table-replication-using-reactable/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=/post/economist-table-replication-using-reactable/&amp;title=Recreating%20a%20Table%20by%20The%20Economist%20Using%20Reactable" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=Recreating%20a%20Table%20by%20The%20Economist%20Using%20Reactable%20/post/economist-table-replication-using-reactable/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=/post/economist-table-replication-using-reactable/&amp;title=Recreating%20a%20Table%20by%20The%20Economist%20Using%20Reactable" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>












  
    
    





  
    
    
    
      
    
    
    
    <div class="media author-card content-widget-hr">
      
        
        <img class="avatar mr-3 avatar-circle" src="/author/connor-rothschild/avatar_hu7fba9da1679ce4a56c592454604cb9c1_715589_270x270_fill_q100_lanczos_center.jpg" alt="Connor Rothschild">
      

      <div class="media-body">
        <h5 class="card-title"><a href="/">Connor Rothschild</a></h5>
        <h6 class="card-subtitle">Undergraduate at Rice University</h6>
        <p class="card-text">I&rsquo;m a senior at Rice University interested in public policy, data science and their intersection. I&rsquo;m most passionate about translating complex data into informative and entertaining visualizations.</p>
        <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/CL_Rothschild" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/connorrothschild" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
</ul>

      </div>
    </div>
  


  










  
  
  <div class="article-widget content-widget-hr">
    <h3>Related</h3>
    <ul>
      
      <li><a href="/post/who-mentions-who-in-the-office/">Who Mentions Who in the Office?</a></li>
      
      <li><a href="/post/tidy-tuesday-replication/">Tidy Tuesday: Replication</a></li>
      
      <li><a href="/post/building-my-first-shiny-app/">Building my First Shiny App</a></li>
      
      <li><a href="/post/dumbbell-plots/">Create Dumbbell Plots to Visualize Group Differences in R</a></li>
      
      <li><a href="/post/refugee-trends/">Trends in Refugee Acceptance, 2002 to 2019</a></li>
      
    </ul>
  </div>
  



  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/css.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/bash.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/javascript.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/markdown.min.js"></script>
        
      

    

    
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.37431be2d92d7fb0160054761ab79602.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">

    <p class="powered-by">
  
      © Connor Rothschild, 2020  | Browse the source code <a href="https://github.com/connorrothschild/connorrothschild.com" target ="_blank" rel="noopener">here</a>.
      <br>
      Built with <i class="far fa-heart"></i> and <i class="fa fa-coffee"></i> (and also 
      <a href="https://www.netlify.com/" target ="_blank" rel="noopener">Netlify</a>, 
      <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>,
      and the R <a href="https://github.com/rstudio/blogdown" target="_blank" rel="noopener">blogdown</a> package).
      
      </p>
    
 
  </footer>
  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
